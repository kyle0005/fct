<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta charset="utf-8">
  <meta name="description" content="">
  <title>main</title>
  <link rel="stylesheet" href="public/styles/main.css">
</head>
<body>
<div class="buy-container" id="buy" v-cloak>
  <section class="address no" v-if="!hasAddress">
    <a href="buy_address.html" class="link">亲，请新建或选择默认收货地址以确保宝贝顺利到达<span class="wei-arrow-right"></span></a>
  </section>
  <section class="address" v-else>
    <a href="buy_address.html" class="link">
      <span class="left item">
        <span class="overText">{{ address.name }}</span>
        <span class="def">默认</span>
      </span>
      <span class="right item">
        <span>{{ address.cellPhone }}</span>
        <span class="overText">{{ addressStr }}</span>
      </span>
      <span class="wei-arrow-right"></span>
    </a>
  </section>
  <section class="product">
    <a href="javascript:;" class="link" v-for="(item, index) in carts">
      <span class="item intro">
        <img :src="item.img">
      </span>
      <span class="item info">
        <span class="container overText">
          <span class="name">{{ item.name }}</span>
          <span class="spec">{{ item.specName }}</span>
          <span class="price">￥{{ item.promotionPrice }}<del class="gray">￥{{ item.price }}</del></span>
        </span>
      </span>
      <span class="item num">
        <span class="container overText">
          x{{ item.buyCount }}
        </span>
      </span>
    </a>
  </section>
  <section class="options">
    <div class="line">
      <div class="left">
        订单优惠<span class="coupon" v-if="hasCoupon">(省{{ coupon.couponAmount }}元)</span>
      </div>
      <div class="right clearfix">
        <div class="switch-container" v-if="!hasCoupon">
          <input class="switch" id="used_merit" name="used_merit" v-model="coupPri" @change="showCoup()" type="checkbox" unchecked>
        </div>
      </div>
    </div>
    <div class="line buy-ani" :class="{show:show_coup}">
      <div class="left">
        <input type="text" v-model="couponcode" class="coup-code" placeholder="请输入优惠券码">
      </div>
      <div class="right clearfix">
        <div class="sub-container">
          <a href="javascript:;" @click="getCoupon()" class="sub">使用</a>
        </div>
      </div>
    </div>
    <div class="line">
      <div class="left">
        订单积分<span class="coupon">(使用多少积分)</span>
      </div>
      <div class="right clearfix">
        <div class="switch-container">
          <input class="switch" id="used_points" name="used_points" @change="showPoint()" type="checkbox" unchecked>
        </div>
      </div>
    </div>
    <div class="line">
      <div class="left">
        订单余额<span class="coupon">(使用多少余额)</span>
      </div>
      <div class="right clearfix">
        <div class="switch-container">
          <input class="switch" id="used_accountAmount" name="used_accountAmount" @change="showAccountAmount()" type="checkbox" unchecked>
        </div>
      </div>
    </div>
    <div class="line">
      <textarea name="remark" maxlength="150" placeholder="告诉卖家您的要求吧...（限150个字）" class="msg"></textarea>
    </div>
  </section>
  <section class="agreement">
    <input type="checkbox" id="agree" name="agree" class="ck">
    <label for="agree" class="agree-container">
      我已同意《方寸堂服务协议》
    </label>
  </section>
  <footer class="foot">
    <div class="pri">应付:￥{{ totalPrice }}</div>
    <div class="sub">
      <a href="pay.html" class="sub" @click="pay()">我要付款</a>
    </div>
  </footer>
</div>
<script src="public/scripts/vue.js"></script>
<script src="public/scripts/api/index.js"></script>
<script>
  config = {
    "carts": [
      {
        "id": 0,
        "goodsId": 0,
        "img": "public/images/resource/pro01.png",
        "name": "稀有xx段【x瓢】",
        "promotionPrice": 300.00,
        "price": 30000.00,
        "specId": 0,
        "specName": "刻龙",
//        "stockCount": 4,   /* 库存 */
        "buyCount": 1       /* 购买数量 */
      },
      {
        "id": 1,
        "goodsId": 1,
        "img": "public/images/resource/pro01.png",
        "name": "稀有xx段【x瓢】",
        "promotionPrice": 900.00,
        "price": 30000,
        "specId": 0,
        "specName": "刻龙",
//        "stockCount": 5,   /* 库存 */
        "buyCount": 5
      },
      {
        "id": 2,
        "goodsId": 2,
        "img": "public/images/resource/pro01.png",
        "name": "稀有xx段【x瓢】",
        "promotionPrice": 100.00,
        "price": 30000,
        "specId": 0,
        "specName": "刻龙",
//        "stockCount": 5,   /* 库存 */
        "buyCount": 2
      },
    ],
    "address": {
      "id": 0,    /* 地址 id */
      "name": "用户名",
      "cellPhone": 1383838388,
      "province": "上海市",
      "cityId": "上海市",
      "townId": "静安区",
      "address": "xxx街道xx号",
      "isDefault": 1    /* 1是默认，0不是默认 */
    },
    "coupon": {
      "couponCode": "", /* 优惠券码 */
      "couponAmount": 0   /* 优惠券面额 */
    },
    "validateCoupon": "",   /* 验证优惠券 */
    "coupon_url": 'xxxxxxxx'
  }
</script>
<script src="public/scripts/buy.js"></script>
</body>
</html>
